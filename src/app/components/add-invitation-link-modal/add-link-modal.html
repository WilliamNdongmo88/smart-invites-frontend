<div class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <button class="modal-close" (click)="closeModal()">✕</button>

        <div class="modal-header">
            <h2>Générer un lien d'invitation</h2>
            <p>Définissez les caractéristiques de votre lien</p>
        </div>

        <form (ngSubmit)="onSubmit()" #addLinkForm="ngForm" class="modal-form">

            <!-- Type -->
            <div class="form-group">
                <label for="type">Type de lien *</label>
                <select
                    id="type"
                    name="type"
                    [(ngModel)]="newLink.type"
                    required
                    class="form-control"
                    >
                    <option value="">-- Sélectionner le type --</option>
                    <option value="unique">Lien unique</option>
                    <option value="couple">Lien couple</option>
                </select>
                <small class="error" *ngIf="addLinkForm.submitted && !addLinkForm.controls['type']?.valid">
                    Veuillez sélectionner un type.
                </small>
            </div>

            <!-- Limite -->
            <div class="form-group">
                <label for="used_limit_count">Nombre limite d'utilisation *</label>
                <input
                    type="number"
                    id="used_limit_count"
                    name="used_limit_count"
                    [(ngModel)]="newLink.used_limit_count"
                    required
                    min="1"
                    placeholder="Ex : 5"
                    class="form-control"
                />
                <small class="error" *ngIf="addLinkForm.submitted && !addLinkForm.controls['used_limit_count']?.valid">
                    Veuillez saisir une limite valide.
                </small>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-outline" (click)="closeModal()">
                    Annuler
                </button>

                <button
                    type="submit"
                    class="btn btn-primary"
                    [disabled]="!addLinkForm.valid"
                    >
                    ✓ Générer le lien
                </button>
            </div>
        </form>
    </div>
</div>