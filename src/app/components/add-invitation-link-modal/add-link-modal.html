<div *ngIf="mode=='create' || mode=='edit'" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <button class="modal-close" (click)="closeModal()">âœ•</button>

        <div *ngIf="mode=='create'" class="modal-header">
            <h2>GÃ©nÃ©rer un lien d'invitation</h2>
            <p>DÃ©finissez les caractÃ©ristiques de votre lien</p>
        </div>
        <div *ngIf="mode=='edit'" class="modal-header">
            <h2>Mettre Ã  jour le lien d'invitation</h2>
            <p>Modifier les caractÃ©ristiques de votre lien</p>
        </div>

        <form (ngSubmit)="onSubmit()" #addLinkForm="ngForm" class="modal-form">

            <!-- Type -->
            <div class="form-group">
                <label for="type">Type de lien *</label>
                <select
                    id="type"
                    name="type"
                    [(ngModel)]="newLink.type"
                    required
                    class="form-control"
                    >
                    <option value="">-- SÃ©lectionner le type --</option>
                    <option value="unique">Lien unique</option>
                    <option value="couple">Lien couple</option>
                </select>
                <small class="error" *ngIf="addLinkForm.submitted && !addLinkForm.controls['type']?.valid">
                    Veuillez sÃ©lectionner un type.
                </small>
            </div>

            <!-- Limite -->
            <div class="form-group">
                <label for="used_limit_count">Nombre limite d'utilisation *</label>
                <input
                    type="number"
                    id="used_limit_count"
                    name="used_limit_count"
                    [(ngModel)]="newLink.used_limit_count"
                    required
                    min="1"
                    placeholder="Ex : 5"
                    class="form-control"
                />
                <small class="error" *ngIf="addLinkForm.submitted && !addLinkForm.controls['used_limit_count']?.valid">
                    Veuillez saisir une limite valide.
                </small>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-outline" (click)="closeModal()">
                    Annuler
                </button>

                <button
                    type="submit"
                    class="btn btn-primary"
                    [disabled]="!addLinkForm.valid"
                    >
                    {{ mode === 'edit' ? 'âœ“ Mettre Ã  jour' : 'âœ“ GÃ©nÃ©rer le lien' }}
                </button>
            </div>
        </form>
    </div>
</div>
<div *ngIf="mode=='partage'" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <button class="modal-close" (click)="closeModal()">âœ•</button>

        <div class="modal-header">
            <h2>Action Ã  mener</h2>
            <p>PartagÃ©, modifiÃ© ou supprimÃ© le lien d'invitation.</p>
        </div>

        <div class="link-actions">
            <button class="btn btn-outline action-btn"
                (click)="shareEventLinkHandle()">
                ğŸ”— <span>Partager</span>
            </button>

            <button class="btn btn-outline action-btn"
                (click)="openEditLinkModal('edit')">
                âœï¸ <span>Modifier</span>
            </button>

            <button class="btn btn-danger action-btn"
                (click)="deleteLinkHandle()">
                ğŸ—‘ï¸ <span>Supprimer</span>
            </button>
        </div>
    </div>
</div>
