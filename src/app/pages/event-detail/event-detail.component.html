<div class="event-detail">
    <!-- Header -->
    <div class="event-header">
        <div class="container">
            <a routerLink="/dashboard" class="back-link">â† Retour au tableau de bord</a>
            <div class="header-content">
            <div>
                <h1>{{ event.title }}</h1>
                <p>Gestion des invitations et des invitÃ©s</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-outline" (click)="shareEvent()">ğŸ”— Partager</button>
                <button class="btn btn-outline" (click)="editEvent()">âœï¸ Ã‰diter</button>
                <button class="btn btn-outline btn-danger" (click)="deleteEvent()">ğŸ—‘ï¸ Supprimer</button>
            </div>
            </div>
        </div>
    </div>

    <!-- Main content -->
    <div class="container py-12 c-mgtop">
    <div class="grid grid-main">
        <!-- Left column - Event details and guests -->
        <div class="left-column">
        <!-- Event Info Card -->
        <div class="card">
            <h2>DÃ©tails de l'Ã©vÃ©nement</h2>

            <div class="details-grid">
            <div class="detail-item">
                <p class="detail-label">ğŸ“… Date et heure</p>
                <p class="detail-value-date">{{ formatDate(event.date) }}</p>
                <p class="detail-value-date">{{ event.time }}</p>
            </div>

            <div class="detail-item">
                <p class="detail-label">ğŸ“ Lieu</p>
                <p class="detail-value-location">{{ event.location }}</p>
            </div>
            </div>

            <div class="detail-full">
            <p class="detail-label">Description</p>
            <p class="detail-value">{{ event.description }}</p>
            </div>

            <div class="divider-gold"></div>

            <button class="btn btn-primary" style="width: 100%;" (click)="sendInvitations()">
            âœ‰ï¸ Envoyer les invitations
            </button>
        </div>

        <!-- Guests List -->
        <div class="card mt-8">
            <h2 class="clickable-title"(click)="navigateToInvitePage()">
                InvitÃ©s ({{ filteredGuests.length }})
            </h2>

            <!-- Search and Filter -->
            <div class="search-filter">
                <div class="search-box">
                    <input
                    type="text"
                    placeholder="Rechercher par nom ou email..."
                    [(ngModel)]="searchTerm"
                    (ngModelChange)="filterGuests()"
                    />
                </div>

                <div class="filter-buttons">
                    <button
                        *ngFor="let filter of filters"
                        [class.active]="filterStatus() === filter.value"
                        class="filter-btn"
                        (click)="setFilterStatus(filter.value)">
                        {{ getFilterLabel(filter.value) }}
                        <!-- <span class="count">
                            {{ getStatusCount(filter.value) }}
                        </span> -->
                    </button>
                </div>
            </div>

            <!-- Guests Table -->
            <div class="guests-table">
            <table>
                <thead>
                <tr>
                    <th>Nom</th>
                    <th>Email</th>
                    <th>Statut</th>
                    <th>Restrictions</th>
                    <th>+1</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let guest of filteredGuests" [class]="'status-' + guest.status">
                    <td>{{ guest.name }}</td>
                    <td class="email">{{ guest.email }}</td>
                    <td>
                    <span class="status-badge" [class]="'status-' + guest.status">
                        {{ getStatusIcon(guest.status) }} {{ getStatusLabel(guest.status) }}
                    </span>
                    </td>
                    <td class="restrictions">{{ guest.dietaryRestrictions || '-' }}</td>
                    <td class="center">{{ guest.plusOne ? 'âœ“' : '-' }}</td>
                    <td class="actions">
                    <button class="btn-small" (click)="editGuest(guest)">Ã‰diter</button>
                    </td>
                </tr>
                </tbody>
            </table>

            <div *ngIf="filteredGuests.length === 0" class="no-guests">
                <p>Aucun invitÃ© trouvÃ©</p>
            </div>
            </div>
        </div>
        </div>

        <!-- Right column - Stats -->
        <div class="right-column">
        <!-- Quick Stats -->
        <div class="card">
            <h3>RÃ©sumÃ©</h3>

            <div class="stats-list">
            <div class="stat-item">
                <p class="stat-label">Total</p>
                <p class="stat-value">{{ event.totalGuests }}</p>
                <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
                </div>
            </div>

            <div class="stat-item">
                <p class="stat-label confirmed">âœ“ ConfirmÃ©s</p>
                <p class="stat-value">{{ event.confirmedGuests }}</p>
                <div class="progress-bar">
                <div class="progress-fill confirmed" [style.width.%]="getPercentage(event.confirmedGuests)"></div>
                </div>
            </div>

            <div class="stat-item">
                <p class="stat-label pending">â³ En attente</p>
                <p class="stat-value">{{ event.pendingGuests }}</p>
                <div class="progress-bar">
                <div class="progress-fill pending" [style.width.%]="getPercentage(event.pendingGuests)"></div>
                </div>
            </div>

            <div class="stat-item">
                <p class="stat-label declined">âœ• RefusÃ©s</p>
                <p class="stat-value">{{ event.declinedGuests }}</p>
                <div class="progress-bar">
                <div class="progress-fill declined" [style.width.%]="getPercentage(event.declinedGuests)"></div>
                </div>
            </div>
            </div>

            <div class="divider-gold"></div>

            <div class="response-rate">
            <p class="label">Taux de rÃ©ponse</p>
            <p class="value">{{ getResponseRate() }}%</p>
            </div>
        </div>

        <!-- Actions -->
        <div class="card mt-6">
            <h3>Actions</h3>
            <div class="actions-list">
            <button class="btn btn-primary" style="width: 100%;" (click)="sendReminder()">
                âœ‰ï¸ Envoyer rappel
            </button>
            <button class="btn btn-outline" style="width: 100%;" (click)="exportList()">
                ğŸ“¥ Exporter liste
            </button>
            <button class="btn btn-outline" style="width: 100%;" (click)="shareLink()">
                ğŸ”— Partager lien
            </button>
            </div>
        </div>

        <!-- Export Options -->
        <div class="card mt-6">
            <h3>Exporter</h3>
            <p class="export-desc">TÃ©lÃ©chargez vos donnÃ©es dans diffÃ©rents formats</p>
            <div class="export-buttons">
            <button class="btn btn-outline" style="width: 100%;" (click)="exportCSV()">
                ğŸ“Š Exporter en CSV
            </button>
            <button class="btn btn-outline" style="width: 100%;" (click)="exportPDF()">
                ğŸ“„ Exporter en PDF
            </button>
            <button class="btn btn-outline" style="width: 100%;" (click)="exportExcel()">
                ğŸ“ˆ Exporter en Excel
            </button>
            </div>
        </div>
        </div>
    </div>
    </div>
</div>